<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Para ti ❤️</title>

<style>
html,body{
  margin:0;height:100%;overflow:hidden;
  background:radial-gradient(circle at top,#2a0033,#000);
  font-family:Arial,sans-serif;
}
canvas{display:block}

.player{
  position:fixed;bottom:20px;left:50%;
  transform:translateX(-50%);
  width:90%;max-width:420px;
  background:rgba(40,0,30,.85);
  border-radius:16px;
  display:flex;align-items:center;
  gap:12px;padding:14px;
  z-index:10;
}
.player button{
  background:none;border:none;
  color:#ffd36a;font-size:28px;
}
.progress{
  flex:1;height:8px;
  background:rgba(255,255,255,.25);
  border-radius:10px;
}
.bar{
  height:100%;width:0%;
  background:linear-gradient(90deg,#ff4fa3,#ffd36a);
}
</style>
</head>

<body>

<canvas id="c"></canvas>

<div class="player">
  <button id="play">▶️</button>
  <div class="progress" id="progress">
    <div class="bar" id="bar"></div>
  </div>
</div>

<audio id="audio" preload="auto">
  <source src="audio/Bronco-Adoro.mp3" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/three@0.148.0/build/three.min.js"></script>

<script>
/* AUDIO – COMPATIBLE CELULAR */
const audio = document.getElementById("audio");
const play = document.getElementById("play");
const bar = document.getElementById("bar");
const progress = document.getElementById("progress");

play.addEventListener("click", async () => {
  if (audio.paused) {
    await audio.play();      // ← gesto directo
    play.textContent = "⏸️";
  } else {
    audio.pause();
    play.textContent = "▶️";
  }
});

audio.ontimeupdate = () => {
  bar.style.width = (audio.currentTime / audio.duration * 100 || 0) + "%";
};

progress.onclick = e => {
  const r = progress.getBoundingClientRect();
  audio.currentTime = ((e.clientX - r.left) / r.width) * audio.duration;
};

/* THREE */
let scene,camera,renderer,photos=[],angle=0;

init();
function init(){
  scene=new THREE.Scene();
  camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,1,5000);
  camera.position.z=800;

  renderer=new THREE.WebGLRenderer({canvas:c,alpha:true});
  renderer.setSize(innerWidth,innerHeight);
  renderer.setPixelRatio(Math.min(devicePixelRatio,1.5));

  scene.add(new THREE.AmbientLight(0xffffff,1));

  const loader=new THREE.TextureLoader();
  ["images/foto1.jpg","images/foto2.jpg","images/foto3.jpg"].forEach((src,i)=>{
    const tex=loader.load(src);
    const s=new THREE.Sprite(new THREE.SpriteMaterial({map:tex}));
    s.scale.set(200,130,1);
    photos.push(s);
    scene.add(s);
  });

  animate();
}

function animate(){
  requestAnimationFrame(animate);
  angle+=0.002;
  photos.forEach((p,i)=>{
    const a=angle+i*Math.PI*2/photos.length;
    p.position.set(Math.cos(a)*450,Math.sin(a)*250,0);
  });
  renderer.render(scene,camera);
}

onresize=()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
};
</script>

</body>
</html>
